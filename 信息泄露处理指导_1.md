```xml
## 信息泄露处理指导

请根据邮件中的漏洞描述，选择相应的修改建议。如有疑问请咨询王卫卫（wwx782342）吴敏锐（wwx796043）。

### 隐藏/Coyote JSP engine 1.1

找到server.xml配置文件，路径如下：CATALINA_HOME/conf/server.xml
找到内容：

​```hxm
<Connection port="8080" protocol="HTTP/1.1"
              connectionTimeout="20000"
              redirectPort="8443"/>
​```

修改为：

​```hxml
<Connection port="8080" protocol="HTTP/1.1"
              connectionTimeout="20000"
              redirectPort="8443"
              server="自定义内容"/>
​```

### Tomcat 隐藏版本信息

 在tomcat根目录下 找到tomcat/lib/catalina.jar这个jar包，修改前先备份此包。注意此指导是在/tmp/catalinam目录下操作完成

解压 catalina.jar包

​```shell
mkdir /tmp/catalina
cp catalina.jar /tmp/catalina
cd /tmp/catalina
jar xf catalina.jar
​```

会得到META-INF和org两个目录

修改  ServerInfo.properties 文件

​```shell
vim org\apache\catalina\util\ServerInfo.properties
​```

修改如下内容：

​```shell
server.info=Apache Tomcat
server.number=
​```

server.info 和number这个后面就是我们的tomcat版本信息

重新打包catalina.jar

​```shell
jar -cvf catalina.jar ./
​```

将打包好的catalina.jar 替换掉 tomcat/lib/catalina.jar，然后重启tomcat

### apache隐藏版本号1

隐藏方法：

1、隐藏Apache版本号的方法是修改Apache的配置文件，如RedHat系的Linux默认是：

vim /etc/httpd/conf/httpd.conf

分别搜索关键字ServerTokens和ServerSignature，修改为下列内容：

​```xml
ServerTokens Prod
ServerSignature Off
​```

2、重启或重新加载apache服务。

### apache隐藏版本号2

如果是编译安装apache，还可以用修改源码编译的方法：

进入Apache的源码目录下的include目录，然后编辑ap_release.h这个文件，修改变量：

​```xml
#define AP_SERVER_BASEVENDOR “Apache Software Foundation”
#define AP_SERVER_BASEPROJECT “Apache HTTP Server”
#define AP_SERVER_BASEPRODUCT “Apache”
#define AP_SERVER_MAJORVERSION_NUMBER 0
#define AP_SERVER_MINORVERSION_NUMBER 0
#define AP_SERVER_PATCHLEVEL_NUMBER 0
#define AP_SERVER_DEVBUILD_BOOLEAN 0
​```xxxxxxxxxx7 1#define AP_SERVER_BASEVENDOR “Apache Software Foundation”2#define AP_SERVER_BASEPROJECT “Apache HTTP Server”3#define AP_SERVER_BASEPRODUCT “Apache”4#define AP_SERVER_MAJORVERSION_NUMBER 05#define AP_SERVER_MINORVERSION_NUMBER 06#define AP_SERVER_PATCHLEVEL_NUMBER 07#define AP_SERVER_DEVBUILD_BOOLEAN 0xml
```